var varList=document.querySelectorAll('.bar, .toggle-min, .toggle-max, .scale, .columns-1-3, .filters fieldset:first-of-type, [name="count_from"], [name="count_to"], [name="output_from"], [name="output_to"]'),toggleMin=varList[6],toggleMax=varList[7],bar=varList[5],scale=varList[4],columns=varList[0],fieldset=varList[1],rangeFrom=varList[2],rangeTo=varList[3],outputFrom=varList[8],outputTo=varList[9],toggleMinX=toggleMin.offsetLeft,toggleMaxX=toggleMax.offsetLeft,flagMin=!1,flagMax=!1,flagFrom=!1,flagTo=!1,step=Math.ceil((rangeTo.max-rangeFrom.min)/196);toggleMin.addEventListener("mousedown",function(e){e.preventDefault(),flagMin=!0,(toggleMinX+=e.offsetX-2)<0&&(toggleMinX=0),toggleMinX>toggleMaxX-22&&(toggleMinX=toggleMaxX-22),toggleMin.style.left=toggleMinX+"px",bar.style.left=toggleMinX+"px",bar.style.width=toggleMaxX-toggleMinX+"px",rangeFrom.value=toggleMinX*step,outputFrom.innerHTML=rangeFrom.value}),toggleMax.addEventListener("mousedown",function(e){e.preventDefault(),flagMax=!0,(toggleMaxX+=e.offsetX-2)>196&&(toggleMaxX=196),toggleMaxX<toggleMinX+22&&(toggleMaxX=toggleMinX+22),toggleMax.style.left=toggleMaxX+"px",bar.style.width=toggleMaxX-toggleMinX+"px",rangeTo.value=toggleMaxX*step,outputTo.innerHTML=rangeTo.value}),document.addEventListener("mouseup",function(e){flagMax=!1,flagMin=!1}),fieldset.addEventListener("mousemove",function(e){flagMin?((toggleMinX=e.pageX-columns.offsetLeft-fieldset.offsetLeft-22)<0&&(toggleMinX=0),toggleMinX>toggleMaxX-22&&(toggleMinX=toggleMaxX-22),toggleMin.style.left=toggleMinX+"px",bar.style.left=toggleMinX+"px",bar.style.width=toggleMaxX-toggleMinX+"px",rangeFrom.value=toggleMinX*step,outputFrom.innerHTML=rangeFrom.value):flagMax&&((toggleMaxX=e.pageX-columns.offsetLeft-fieldset.offsetLeft-22)>196&&(toggleMaxX=196),toggleMaxX<toggleMinX+22&&(toggleMaxX=toggleMinX+22),toggleMax.style.left=toggleMaxX+"px",bar.style.width=toggleMaxX-toggleMinX+"px",rangeTo.value=toggleMaxX*step,outputTo.innerHTML=rangeTo.value)}),rangeFrom.addEventListener("focus",function(e){flagFrom=!0}),rangeFrom.addEventListener("focusout",function(e){flagFrom=!1}),rangeTo.addEventListener("focus",function(e){flagTo=!0}),rangeTo.addEventListener("focusout",function(e){flagTo=!1}),window.addEventListener("keydown",function(e){flagFrom?(37===e.keyCode||40===e.keyCode?(e.preventDefault(),toggleMinX-=1):38!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),toggleMinX+=1),toggleMinX<0&&(toggleMinX=0),toggleMinX>toggleMaxX-22&&(toggleMinX=toggleMaxX-22),toggleMin.style.left=toggleMinX+"px",bar.style.left=toggleMinX+"px",bar.style.width=toggleMaxX-toggleMinX+"px",rangeFrom.value=toggleMinX*step,outputFrom.innerHTML=rangeFrom.value):flagTo&&(37===e.keyCode||40===e.keyCode?(e.preventDefault(),toggleMaxX-=1):38!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),toggleMaxX+=1),toggleMaxX>196&&(toggleMaxX=196),toggleMaxX<toggleMinX+22&&(toggleMaxX=toggleMinX+22),toggleMax.style.left=toggleMaxX+"px",bar.style.width=toggleMaxX-toggleMinX+"px",rangeTo.value=toggleMaxX*step,outputTo.innerHTML=rangeTo.value)});