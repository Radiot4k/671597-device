var linksList=document.querySelectorAll(".write-us, .modal-write-us, .open-map, .modal-map, .modal-overlay"),openMapLink=linksList.item(0),writeUsLink=linksList.item(1),writeUsPopap=linksList.item(2),mapPopap=linksList.item(3),overlay=linksList.item(4),writeUsElementsList=writeUsPopap.querySelectorAll(".write-us-form, [name='name'], [name='e-mail'], [name='text'], .modal-close"),form=writeUsElementsList.item(0),inputName=writeUsElementsList.item(1),inputEmail=writeUsElementsList.item(2),textarea=writeUsElementsList.item(3),closeWriteUsPopap=writeUsElementsList.item(4),closeMap=mapPopap.querySelector(".modal-close"),isStorageSupport=!0,storName="";try{storName=localStorage.getItem("name"),storEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUsPopap.classList.add("modal-show"),overlay.classList.add("overlay-show"),storName?(inputName.value=storName,storEmail?(inputEmail.value=storEmail,textarea.focus()):inputEmail.focus()):inputName.focus()}),closeWriteUsPopap.addEventListener("click",function(e){e.preventDefault(),writeUsPopap.classList.remove("modal-show"),overlay.classList.remove("overlay-show"),writeUsPopap.classList.contains("modal-error")&&writeUsPopap.classList.remove("modal-error")}),form.addEventListener("submit",function(e){inputName.value&&inputEmail.value&&textarea.value?isStorageSupport&&(localStorage.setItem("name",inputName.value),localStorage.setItem("email",inputEmail.value)):(e.preventDefault(),writeUsPopap.classList.remove("modal-error"),writeUsPopap.offsetWidth=writeUsPopap.offsetWidth,writeUsPopap.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writeUsPopap.classList.contains("modal-show")&&writeUsPopap.classList.remove("modal-show"),writeUsPopap.classList.contains("modal-error")&&writeUsPopap.classList.remove("modal-error"),overlay.classList.remove("overlay-show"))}),openMapLink.addEventListener("click",function(e){e.preventDefault(),mapPopap.classList.add("modal-show"),overlay.classList.add("overlay-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),mapPopap.classList.remove("modal-show"),overlay.classList.remove("overlay-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopap.classList.contains("modal-show")&&mapPopap.classList.remove("modal-show"),overlay.classList.remove("overlay-show"))});